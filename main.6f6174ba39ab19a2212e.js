/*! For license information please see main.6f6174ba39ab19a2212e.js.LICENSE.txt */
(()=>{"use strict";var e,t={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var r={},s=[],a=0;a<e.length;a++){var l=e[a],c=o.base?l[0]+o.base:l[0],u=r[c]||0,d="".concat(c," ").concat(u);r[c]=u+1;var p=n(d),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var f=i(h,o);o.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}s.push(d)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var r=o(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<r.length;s++){var a=n(r[s]);t[a].references--}for(var l=o(e,i),c=0;c<r.length;c++){var u=n(r[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);o&&s[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},523:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(601),i=n.n(o),r=n(314),s=n.n(r)()(i());s.push([e.id,"html, body {\n  height: 100%; /* Ensure html and body can support full height children */\n  margin: 0;\n  padding: 0;\n  max-width: 100vw;\n  background-color: #f0f8ff; \n  font-family: 'Comic Sans MS', 'Arial', sans-serif; \n  box-sizing: border-box;\n}\n\n*, *::before, *::after {\n  box-sizing: inherit;\n}\n\n#header {\n  background-color: #79c7c5; \n  color: #ffffff; \n  height: 3rem; \n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 15px; \n  box-shadow: 0 2px 4px rgba(0,0,0,0.1); \n  font-family: 'Comic Sans MS', 'Arial', sans-serif;\n}\n\n#author{\n  color: #ffffff; \n  font-weight: bold;\n}\npre,\ncode {\n  overflow: auto;\n  font-size: 15px;\n  margin: 0;\n}\n\n#pageContainer {\n  display: flex;\n  width: 100%;\n  max-width: 100vw;\n  height: calc(100vh - 3rem); \n  box-sizing: border-box;\n}\n\n#blocklyDiv {\n  flex-basis: 100%;\n  height: 100%;\n  min-width: 600px;\n  box-sizing: border-box;\n}\n\n#outputPane {\n  display: flex;\n  flex-direction: column;\n  width: 400px;\n  flex-shrink: 0;\n  height: 100%;\n  background-color: #e0e0e0; \n  box-sizing: border-box;\n}\n\n#menubar {\n  background-color: #c0c0c0;\n  padding: 8px; \n  text-align: center;\n}\n\n/* Generated Code Area */\n#generatedCode {\n  flex-grow: 1; /* Allow to grow to fill available space */\n  flex-shrink: 1; /* Allow to shrink if space is limited */\n  flex-basis: 30%;\n  background-color: #f5f5f5; /* Very light grey for code background */\n  color: #333333; /* Dark grey text for readability */\n  margin: 0;\n  padding: 10px;\n  overflow: auto;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 14px;\n  white-space: pre;\n  border-bottom: 1px solid #cccccc; /* Lighter border */\n}\n\n/* Interactive Terminal Area (Container) */\n#output {\n  flex-grow: 1; /* Already 1, allow to grow */\n  flex-shrink: 1; /* Allow to shrink if space is limited */\n  flex-basis: 70%;\n  display: flex;\n  flex-direction: column;\n  background-color: #ffffff; /* White background for output */\n  color: #333333; /* Dark text */\n  padding: 0;\n  margin: 0;\n  overflow: hidden;\n}\n\n#interactiveConsoleOutput {\n  flex-grow: 1;\n  padding: 10px;\n  overflow-y: auto;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 15px;\n  line-height: 1.3;\n  white-space: pre-wrap;\n  color: #333333; /* Dark text for console output */\n}\n\n#interactiveConsoleOutput p {\n  margin: 2px 0;\n  line-height: 1.3;\n}\n\n#interactiveConsoleInput {\n  flex-shrink: 0;\n  padding: 8px;\n  margin: 0;\n  border: none;\n  border-top: 1px solid #dddddd; /* Lighter border */\n  background-color: #f9f9f9; /* Very light grey for input background */\n  color: #333333; /* Dark text */\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 15px;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n#interactiveConsoleInput:focus {\n  outline: 1px solid #79c7c5; /* Teal outline on focus */\n}\n\n.blocklytext{\n  fill:black;\n}\n/* ... existing .blocklyMainBlock, .blocklyText, #runButton, @media queries ... */\n/* Ensure the media queries adjust flex-basis or heights if needed for smaller screens */\n\n/* Specific styling for message types in interactiveConsoleOutput */\n#interactiveConsoleOutput p.success-message {\n  color: #28a745; /* Keep success green */\n}\n\n#interactiveConsoleOutput p.error-message {\n  color: #dc3545; /* Keep error red */\n}\n\n#interactiveConsoleOutput p.info-message {\n  color: #555555; /* Darker grey for info messages on light background */\n}\n\n#interactiveConsoleOutput p.input-message {\n  color: #007bff; /* Keep input blue */\n}\n\n#runButton {\n  background-color: #ff6347; /* Tomato red - a vibrant, playful color */\n  color: white;\n  font-size: 16px; /* Slightly larger font */\n  font-weight: bold;\n  padding: 10px 20px; /* More padding for a bigger button */\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: transform 0.2s, background-color 0.2s;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.15); /* Add shadow to button */\n}\n\n#runButton:active {\n  transform: scale(0.95);\n}\n\n#runButton:disabled {\n  background-color: #6c757d;\n  cursor: not-allowed;\n}\n\n/* Responsive design for iPad mini (portrait and landscape) */\n@media (min-width: 744px) and (max-width: 1133px) {\n  #blocklyDiv {\n    flex-basis: 65%; /* Increased from 50% */\n    min-width: 0; /* Allow shrinking if necessary, flex-basis controls size */\n  }\n\n  #outputPane {\n    flex-basis: 35%; /* Decreased from 50% */\n    width: auto; /* Let flex-basis control the width */\n  }\n\n  #runButton {\n    font-size: 13px;\n    padding: 5px 10px;\n  }\n}\n\n/* Responsive design for iPhone 13 Pro (portrait and landscape) */\n@media (max-width: 844px) {\n  body {\n    font-size: 14px; \n  }\n\n  #header {\n    height: 2.5rem; /* Ensuring header is reduced */\n    padding: 0 10px; \n  }\n\n  #pageContainer {\n    flex-direction: column;\n    height: calc(100vh - 2.5rem); /* Adjusted for new header height */\n    overflow-y: auto; \n  }\n\n  #blocklyDiv {\n    min-width: 100%;\n    height: 50vh; /* Reduced from 55vh to give more space to output pane */\n  }\n\n  #outputPane {\n    width: 100%;\n    height: calc(50vh - 2.5rem); /* Explicit height: remaining viewport minus header */\n    min-height: 0; \n    display: flex; /* Ensure it's a flex container */\n    flex-direction: column; /* Stack its children vertically */\n    overflow: hidden; /* Prevent outputPane itself from scrolling, let children handle it */\n  }\n\n  #outputPane > #menubar {\n    flex-shrink: 0; /* Prevent menubar from shrinking */\n  }\n\n  #outputPane > #generatedCode {\n    flex-grow: 0; /* Do not allow generatedCode to grow */\n    flex-shrink: 1; /* Allow generatedCode to shrink if needed */\n    flex-basis: 40px; /* Set a small initial height for generatedCode */\n    overflow-y: auto; /* Ensure it can scroll if content overflows its small height */\n    min-height: 20px; /* Absolute minimum height */\n    border-bottom: 1px solid #ccc; /* Add a separator */\n  }\n\n  #outputPane > #output { /* This contains the interactive console */\n    flex-grow: 1; /* Allow interactive console area to take remaining space */\n    flex-shrink: 1;\n    flex-basis: auto; /* Default basis, growth factor is key */\n    min-height: 0; /* Allow it to shrink properly */\n    overflow-y: auto; /* Already there, but good to confirm */\n    display: flex; /* Make it a flex container to manage its children */\n    flex-direction: column; /* Stack console output and input */\n  }\n  \n  /* Ensure children of #output also behave correctly */\n  #outputPane > #output > #interactiveConsoleOutput {\n      flex-grow: 1;\n      min-height: 50px; /* Give some minimum space for output before input pushes it away */\n  }\n  #outputPane > #output > #interactiveConsoleInput {\n      flex-shrink: 0; /* Prevent input field from shrinking */\n  }\n\n  #runButton {\n    font-size: 12px;\n    padding: 5px 10px;\n  }\n}\n\n/* Loading animation */\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #666;\n  font-size: 18px;\n}\n\n.loading-spinner {\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #79c7c5;\n  border-radius: 50%;\n  width: 50px;\n  height: 50px;\n  animation: spin 1s linear infinite;\n  margin-bottom: 20px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}",""]);const a=s},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},822:(e,t,n)=>{var o=n(671);const i={itemCount_:0,mutationToDom:function(){const e=o.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10)||0,this.updateShape_()},decompose:function(e){const t=e.newBlock("printf_h_container");t.initSvg();let n=t.getInput("STACK").connection;for(let t=0;t<this.itemCount_;t++){const t=e.newBlock("printf_h_add_item");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){let t=e.getInputTargetBlock("STACK");const n=[];for(;t;)n.push(t.valueConnection_),t=t.nextConnection&&t.nextConnection.targetBlock();for(let e=0;e<this.itemCount_;e++)this.getInput("ARG"+e)&&this.removeInput("ARG"+e);this.itemCount_=n.length,this.updateShape_()},updateShape_:function(){let e=0;for(;this.getInput("ARG"+e);)this.removeInput("ARG"+e),e++;for(let e=0;e<this.itemCount_;e++)this.appendValueInput("ARG"+e).setCheck("VariableName").setAlign(o.inputs.Align.RIGHT).appendField("變數"+(e+1))}};o.Blocks.printf={init:function(){if(this.appendDummyInput().appendField("顥示").appendField(new o.FieldTextInput("Hello World"),"FORMAT_STRING_FIELD"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#14cccc"),this.setInputsInline(!0),this.mixin(i,!0),o.icons&&o.icons.MutatorIcon)try{const e=new o.icons.MutatorIcon(["printf_h_add_item"],this);this.addIcon(e)}catch(e){console.error("Error manually creating/adding MutatorIcon for printf:",e)}else console.error("Blockly.icons.MutatorIcon is NOT available for printf.");this.setTooltip("Prints text or values to the output. Use %s for strings, %d for integers, %f for floats in the format string. Use the gear to add values."),this.setHelpUrl("http://www.cplusplus.com/reference/cstdio/printf/")}},o.Blocks.printf_h_container={init:function(){this.appendDummyInput().appendField("讀取變數"),this.appendStatementInput("STACK"),this.setColour("#14cccc"),this.setTooltip("Add, remove, or reorder arguments to be printed."),this.contextMenu=!1}},o.Blocks.printf_h_add_item={init:function(){this.appendDummyInput().appendField("變數"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#14cccc"),this.setTooltip("Represents a value to be printed by printf."),this.contextMenu=!1}},o.Blocks.printf,o.Blocks.printf_h_container,o.Blocks.printf_h_add_item;const r={itemCount_:0,mutationToDom:function(){const e=o.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10)||0,this.updateShape_()},decompose:function(e){const t=e.newBlock("scanf_h_container");t.initSvg();let n=t.getInput("STACK").connection;for(let t=0;t<this.itemCount_;t++){const t=e.newBlock("scanf_h_add_item");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){let t=e.getInputTargetBlock("STACK");const n=[];for(;t;)n.push(t.valueConnection_),t=t.nextConnection&&t.nextConnection.targetBlock();for(let e=0;e<this.itemCount_;e++)this.getInput("VAR"+e)&&this.removeInput("VAR"+e);this.itemCount_=n.length,this.updateShape_()},updateShape_:function(){let e=0;for(;this.getInput("VAR"+e);)this.removeInput("VAR"+e),e++;for(let e=0;e<this.itemCount_;e++)this.appendValueInput("VAR"+e).setCheck("VariableName").setAlign(o.inputs.Align.RIGHT).appendField("到變數"+(e+1))}};o.Extensions.registerMutator("scanf_mutator_extension",r,void 0,["scanf_h_add_item"]),o.Blocks.scanf={init:function(){if(console.log("SCANF_BLOCK_INIT: Initializing scanf block."),this.appendDummyInput().appendField("輸入:").appendField(new o.FieldTextInput(""),"FORMAT_STRING_FIELD"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#14cccc"),this.setInputsInline(!0),this.mixin(r,!0),o.icons&&o.icons.MutatorIcon)try{console.log("SCANF_BLOCK_INIT: Attempting to create and add MutatorIcon manually.");const e=new o.icons.MutatorIcon(["scanf_h_add_item"],this);console.log("SCANF_BLOCK_INIT: MutatorIcon instance created:",e),console.log("SCANF_BLOCK_INIT: Does instance have getType?","function"==typeof e.getType),"function"==typeof e.getType&&console.log("SCANF_BLOCK_INIT: getType returns:",e.getType()),this.addIcon(e),console.log("SCANF_BLOCK_INIT: Manually added MutatorIcon.")}catch(e){console.error("SCANF_BLOCK_INIT: Error manually creating/adding MutatorIcon:",e)}else console.error("SCANF_BLOCK_INIT: Blockly.icons.MutatorIcon is NOT available for manual addition. Check SCANF_MODULE_LOAD logs.");this.setTooltip("Reads data from standard input. Use the gear to add variables."),this.setHelpUrl("")}},o.Blocks.scanf_h_container={init:function(){this.appendDummyInput().appendField("變數數量"),this.appendStatementInput("STACK"),this.setColour("#14cccc"),this.setTooltip("Add or remove variables to be read by scanf."),this.contextMenu=!1}},o.Blocks.scanf_h_add_item={init:function(){this.appendDummyInput().appendField("變數"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#14cccc"),this.setTooltip("Represents a variable to be read by scanf."),this.contextMenu=!1}},o.Blocks.scanf,o.Blocks.scanf_h_container,o.Blocks.scanf_h_add_item,o.Blocks.main={init:function(){this.appendDummyInput().appendField(new o.FieldImage("https://www.gstatic.com/codesite/ph/images/star_on.gif",15,15,{alt:"int main (void)",flipRtl:"FALSE"})).appendField(new o.FieldTextInput(""),"type1").appendField("main (").appendField(new o.FieldTextInput(""),"type2").appendField(") {"),this.appendStatementInput("BODY").setCheck(null),this.appendDummyInput().appendField("}"),this.setColour(230),this.setTooltip("The main entry point of a C program. Code inside main runs when the program starts."),this.setHelpUrl(""),this.getSvgRoot().classList.add("blocklyMainBlock")}},o.Blocks.main,o.Blocks.return={init:function(){this.appendDummyInput().appendField("return : ").appendField(new o.FieldTextInput("0"),"VALUE").appendField(" ;"),this.setColour(230),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.Blocks.return,o.Blocks.stdio={init:function(){this.appendDummyInput().appendField("stdio.h"),this.setColour("#4C64A4")}},o.Blocks.stdio,o.Blocks.mathlib={init:function(){this.appendDummyInput().appendField("math.h"),this.setColour("#4C64A4")}},o.Blocks.mathlib,o.Blocks.declare_variable={init:function(){this.appendDummyInput().appendField(new o.FieldDropdown([["整數","int"],["浮點數","float"],["雙精度浮點數","double"],["字串","string"],["布林值","bool"],["字元","char"],["整數陣列","int_array"],["浮點數陣列","float_array"],["雙精度浮點數陣列","double_array"],["字串陣列","string_array"],["布林值陣列","bool_array"]]),"TYPE_DROPDOWN"),this.appendValueInput("VARIABLE_NAME").setCheck("VariableName"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#008080"),this.setTooltip("")}},o.Blocks.declare_variable,o.Blocks.math_constant={init:function(){this.appendDummyInput().appendField(new o.FieldDropdown([["intmax","INT_MAX"],["intmin","INT_MIN"],["floatmax","FLT_MAX"],["floatmin","-FLT_MAX"],["doublemax","DBL_MAX"],["doublemin","-DBL_MAX"]]),"constant"),this.setOutput(!0,"Number"),this.setColour("#228B22"),this.setTooltip("Select a constant value."),this.setHelpUrl("")}},o.Blocks.math_constant,o.Blocks.variable_name_input={init:function(){this.appendDummyInput().appendField("變數名稱: ").appendField(new o.FieldTextInput(""),"VAR_NAME"),this.setOutput(!0,"VariableName"),this.setColour("#4B0082"),this.setTooltip("輸入一個變數名稱"),this.setHelpUrl(""),this.getField("VAR_NAME").setValidator((function(e){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)?e:null}))}},o.Blocks.variable_name_input,o.Blocks.assignment={init:function(){this.appendValueInput("VAR").setCheck("VariableName"),this.appendDummyInput().appendField("="),this.appendValueInput("VALUE").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#008080"),this.setTooltip("Assign a value to a variable."),this.setHelpUrl("");const e=o.utils.xml.textToDom('<shadow type="variable_name_input"><field name="VAR_NAME"></field></shadow>');this.getInput("VAR").connection.setShadowDom(e);const t=o.utils.xml.textToDom('<shadow type="literal_value"><field name="VALUE">0</field></shadow>');this.getInput("VALUE").connection.setShadowDom(t)}},o.Blocks.assignment,o.Blocks.literal_value={init:function(){this.appendDummyInput().appendField(new o.FieldTextInput("0"),"VALUE"),this.setOutput(!0,"LITERAL"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.Blocks.literal_value,o.Blocks.datatype={init:function(){this.appendDummyInput().appendField(new o.FieldDropdown([["整數","int"],["浮點數","float"],["雙精度浮點數","double"],["字串","string"],["布林值","bool"],["字元","char"],["整數陣列","int_array"],["浮點數陣列","float_array"],["雙精度浮點數陣列","double_array"],["字串陣列","string_array"],["布林值陣列","bool_array"]]),"TYPE_DROPDOWN");const e=this.appendValueInput("VARIABLE_NAME").setCheck("VariableName");e.connection&&e.connection.setShadowState({type:"variable_name_input"});const t=this.appendValueInput("INITIAL_VALUE").setCheck(null).appendField("=");t.connection&&t.connection.setShadowState({type:"literal_value"}),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#008080"),this.setTooltip("定义一个指定类型的变量，并可选择赋初值。")}},o.Blocks.datatype,o.Blocks.literal_input={init:function(){this.appendDummyInput().appendField(new o.FieldTextInput(""),"statement"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#008080"),this.setTooltip(""),this.setHelpUrl("")}};const s={items_:[],mutationToDom:function(){const e=o.utils.xml.createElement("mutation");e.setAttribute("item-count",this.items_.length);for(let t=0;t<this.items_.length;t++)e.setAttribute("item"+t,this.items_[t]);return e},domToMutation:function(e){const t=parseInt(e.getAttribute("item-count"),10)||0;this.items_=[];for(let n=0;n<t;n++){const t=e.getAttribute("item"+n);t&&this.items_.push(t)}this.updateShape_()},decompose:function(e){const t=e.newBlock("if_else_conditions_container");t.initSvg();let n=t.getInput("STACK").connection;for(let t=0;t<this.items_.length;t++){const o=this.items_[t],i=e.newBlock("AND"===o?"condition_and_item":"condition_or_item");i.initSvg(),n.connect(i.previousConnection),n=i.nextConnection}return t},compose:function(e){const t=[];let n=e.getInputTargetBlock("STACK");for(;n&&!n.isDisposed();)"condition_and_item"===n.type?t.push("AND"):"condition_or_item"===n.type&&t.push("OR"),n=n.nextConnection&&n.nextConnection.targetBlock();this.items_=t,this.updateShape_()},updateShape_:function(){let e=0;for(;;){let t=this.getInput("DUMMY_LABEL_ARG"+e),n=this.getInput("ARG"+e);if(t&&this.removeInput("DUMMY_LABEL_ARG"+e),n&&this.removeInput("ARG"+e),!t&&!n)break;if(e++,e>20){console.error("Exceeded max iterations in updateShape_ remove loop");break}}this.getInput("IF_STATEMENTS")&&this.removeInput("IF_STATEMENTS"),this.getInput("ELSE_STATEMENTS")&&this.removeInput("ELSE_STATEMENTS");for(let e=0;e<this.items_.length;e++){const t=this.items_[e];let n="";"AND"===t?n="並且 條件"+(e+1):"OR"===t&&(n="或者 條件"+(e+1)),this.appendDummyInput("DUMMY_LABEL_ARG"+e).appendField(n),this.appendValueInput("ARG"+e).setCheck("Boolean").setAlign(o.inputs.Align.RIGHT)}this.appendStatementInput("IF_STATEMENTS").appendField("則"),this.appendStatementInput("ELSE_STATEMENTS").appendField("否則"),this.rendered?this.render():this.workspace&&this.workspace.rendered}};o.Blocks.if_else={init:function(){if(this.setInputsInline(!0),this.appendDummyInput("DUMMY_LABEL_IF").appendField("如果"),this.appendValueInput("CONDITION").setCheck("Boolean"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#5ba55b"),this.setTooltip("如果條件為真，則執行第一組語句；否則，執行第二組語句。可使用設定添加 '並且' 或 '或者' 條件。"),this.setHelpUrl(""),void 0===this.items_&&(this.items_=[]),this.mixin(s,!0),this.isInFlyout||this.updateShape_(),o.icons&&o.icons.MutatorIcon)try{const e=new o.icons.MutatorIcon(["condition_and_item","condition_or_item"],this);this.addIcon(e)}catch(e){console.error("Error manually creating/adding MutatorIcon for if_else:",e)}else console.error("Blockly.icons.MutatorIcon is NOT available for if_else.")}},o.Blocks.if_else_conditions_container={init:function(){this.appendDummyInput().appendField("添加/排序條件"),this.appendStatementInput("STACK"),this.setColour("#5ba55b"),this.setTooltip("添加, 移除, 或重新排序 '並且'/'或者' 條件。"),this.contextMenu=!1}},o.Blocks.condition_and_item={init:function(){this.appendDummyInput().appendField("並且 條件"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#5ba55b"),this.setTooltip("添加一個 '並且' 連結的條件。"),this.contextMenu=!1}},o.Blocks.condition_or_item={init:function(){this.appendDummyInput().appendField("或者 條件"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#5ba55b"),this.setTooltip("添加一個 '或者' 連結的條件。"),this.contextMenu=!1}};const a={if_else:o.Blocks.if_else,if_else_conditions_container:o.Blocks.if_else_conditions_container,condition_and_item:o.Blocks.condition_and_item,condition_or_item:o.Blocks.condition_or_item};o.Blocks.condition_comparison={init:function(){this.setOutput(!0,"Boolean"),this.setInputsInline(!0),this.appendValueInput("A").setCheck(["Number","String","VariableName","LITERAL"]).setShadowDom(o.utils.xml.textToDom('<shadow type="literal_value"><field name="VALUE">0</field></shadow>')),this.appendDummyInput().appendField(new o.FieldDropdown([["==","EQ"],["!=","NEQ"],["<","LT"],["<=","LTE"],[">","GT"],[">=","GTE"]]),"OP"),this.appendValueInput("B").setCheck(["Number","String","VariableName","LITERAL"]).setShadowDom(o.utils.xml.textToDom('<shadow type="literal_value"><field name="VALUE">0</field></shadow>')),this.setColour("#5b80a5"),this.setTooltip("比較兩個值。"),this.setHelpUrl("")}};const l={condition_comparison:o.Blocks.condition_comparison};o.common.createBlockDefinitionsFromJsonArray([...Object.values(a).map((e=>({type:e.type,...e}))),...Object.values(l).map((e=>({type:e.type,...e})))]);const c=new o.Generator("C");c.ORDER_ATOMIC=0,c.ORDER_NEW=1.1,c.ORDER_MEMBER=1.2,c.ORDER_FUNCTION_CALL=2,c.ORDER_INCREMENT=3,c.ORDER_DECREMENT=3,c.ORDER_BITWISE_NOT=4.1,c.ORDER_UNARY_PLUS=4.2,c.ORDER_UNARY_NEGATION=4.3,c.ORDER_LOGICAL_NOT=4.4,c.ORDER_TYPEOF=4.5,c.ORDER_VOID=4.6,c.ORDER_DELETE=4.7,c.ORDER_AWAIT=4.8,c.ORDER_EXPONENTIATION=5,c.ORDER_MULTIPLICATION=5.1,c.ORDER_DIVISION=5.2,c.ORDER_MODULUS=5.3,c.ORDER_SUBTRACTION=6.1,c.ORDER_ADDITION=6.2,c.ORDER_BITWISE_SHIFT=7,c.ORDER_RELATIONAL=8,c.ORDER_IN=8,c.ORDER_INSTANCEOF=8,c.ORDER_EQUALITY=9,c.ORDER_BITWISE_AND=10,c.ORDER_BITWISE_XOR=11,c.ORDER_BITWISE_OR=12,c.ORDER_LOGICAL_AND=13,c.ORDER_LOGICAL_OR=14,c.ORDER_CONDITIONAL=15,c.ORDER_ASSIGNMENT=16,c.ORDER_YIELD=17,c.ORDER_COMMA=18,c.ORDER_NONE=99,console.log("C_GENERATOR_ORDER_NONE:",c.ORDER_NONE),console.log("C_GENERATOR_ORDER_ATOMIC:",c.ORDER_ATOMIC),c.workspaceToCode=function(e){const t=e.getTopBlocks(!0);t.sort(((e,t)=>{const n=e.getRelativeToSurfaceXY(),o=t.getRelativeToSurfaceXY();return n.y!==o.y?n.y-o.y:n.x-o.x}));let n="";for(const e of t)n+=this.blockToCode(e)||"";return n},c.forBlock.main=function(e,t){const n=e.getFieldValue("type1"),o=e.getFieldValue("type2"),i=e.getInput("BODY").connection.targetBlock();let r="";return i&&(r=t.blockToCode(i)),`${n} main(${o}) {\n    /* HIDE_FROM_STUDENT */ setvbuf(stdout, NULL, _IONBF, 0);\n${r}}\n`},c.forBlock.return=function(e,t){return`    return ${e.getFieldValue("VALUE")};`},c.forBlock.printf=function(e,t){const n='"'+(e.getFieldValue("FORMAT_STRING_FIELD")||"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+'\\n"',o=[];for(let n=0;n<e.itemCount_;n++){const i=t.valueToCode(e,"ARG"+n,t.ORDER_COMMA)||"NULL";o.push(i)}let i=`    printf(${n}`;o.length>0&&(i+=`, ${o.join(", ")}`),i+=");\n";const r=e.nextConnection&&e.nextConnection.targetBlock();return r&&(i+=t.blockToCode(r)),i},c.forBlock.scanf=function(e,t){const n=e.getFieldValue("FORMAT_STRING_FIELD")||"";let o=n;o=o.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),/^"(.*)"$/.test(n)||(o='"'+o+'"');const i=[];for(let n=0;n<e.itemCount_;n++){const o=t.valueToCode(e,"VAR"+n,t.ORDER_NONE)||"/*_undefined_variable_*/";i.push("&"+o)}let r=`    scanf(${o}`;i.length>0&&(r+=`, ${i.join(", ")}`),r+=");\n";const s=e.nextConnection&&e.nextConnection.targetBlock();return s&&(r+=t.blockToCode(s)),r},c.forBlock.math_constant=function(e,t){const n=e.getFieldValue("constant");return e.outputConnection&&e.outputConnection.targetConnection?[n,t.ORDER_ATOMIC]:null},c.forBlock.variable_name_input=function(e,t){const n=e.getFieldValue("VAR_NAME");return e.outputConnection&&e.outputConnection.targetConnection?[n,t.ORDER_ATOMIC]:n},c.forBlock.assignment=function(e,t){let n=`    ${t.valueToCode(e,"VAR",t.ORDER_NONE)||"var"} = ${t.valueToCode(e,"VALUE",t.ORDER_NONE)||"0"};\n`;const o=e.nextConnection&&e.nextConnection.targetBlock();return o&&(n+=t.blockToCode(o)),n},c.forBlock.literal_value=function(e,t){const n=e.getFieldValue("VALUE");if(e.outputConnection&&e.outputConnection.targetConnection){const e=n.trim(),o=parseFloat(e);return!isNaN(o)&&isFinite(o)&&o.toString()===e?[e,t.ORDER_ATOMIC]:[n,t.ORDER_ATOMIC]}return null},c.forBlock.atomic_type_selector=function(e,t){return[e.getFieldValue("TYPE_VALUE"),t.ORDER_ATOMIC]},c.forBlock.datatype=function(e,t){let n=e.getFieldValue("TYPE_DROPDOWN");const o=t.valueToCode(e,"VARIABLE_NAME",t.ORDER_NONE)||"myVar",i=t.valueToCode(e,"INITIAL_VALUE",t.ORDER_ASSIGNMENT)||null;let r="",s=!1;n.endsWith("_array")?(!0,n=n.replace("_array",""),"string"===n?n="char*":"bool"===n&&(n="_Bool"),r=`    ${n} ${o}[]`):"string"===n?r=i&&i.startsWith('"')?`    char ${o}[]`:`    char* ${o}`:("bool"===n&&(n="_Bool"),r=`    ${n} ${o}`),i&&(r+=` = ${i}`),r+=";\n";let a=r;const l=e.nextConnection&&e.nextConnection.targetBlock();return l&&(a+=t.blockToCode(l)),a},c.forBlock.declare_variable=function(e,t){let n=e.getFieldValue("TYPE_DROPDOWN");const o=t.valueToCode(e,"VARIABLE_NAME",t.ORDER_NONE)||"myVar";let i="";n.endsWith("_array")?(n=n.replace("_array",""),"string"===n?n="char*":"bool"===n&&(n="_Bool"),i=`    ${n} ${o}[]`):"string"===n?i=`    char* ${o}`:("bool"===n&&(n="_Bool"),i=`    ${n} ${o}`),i+=";\n";let r=i;const s=e.nextConnection&&e.nextConnection.targetBlock();return s&&(r+=t.blockToCode(s)),r},c.forBlock.literal_input=function(e,t){let n=`    ${e.getFieldValue("statement")};\n`;const o=e.nextConnection&&e.nextConnection.targetBlock();return o&&(n+=t.blockToCode(o)),n},c.forBlock.stdio=function(e,t){return"#include <stdio.h>\n"},c.forBlock.mathlib=function(e,t){return"#include <math.h>\n"},(e=>{e.forBlock.if_else=function(t){let n=e.valueToCode(t,"CONDITION",e.ORDER_NONE)||"false";const o=t.items_||[];for(let i=0;i<o.length;i++){const r=e.valueToCode(t,"ARG"+i,e.ORDER_NONE)||"false",s=o[i];"AND"===s?n+=" && "+r:"OR"===s&&(n+=" || "+r)}let i=e.statementToCode(t,"IF_STATEMENTS");i=e.prefixLines(i,e.INDENT);let r="    if ("+n+") {\n"+i+"    }\n";const s=t.getInput("ELSE_STATEMENTS");if(s&&s.connection.targetBlock()){let n=e.statementToCode(t,"ELSE_STATEMENTS");n=e.prefixLines(n,e.INDENT),r+="  else {\n"+n+"    }"}const a=t.nextConnection&&t.nextConnection.targetBlock();return a&&(r+=e.blockToCode(a)),r+"\n"},e.forBlock.condition_comparison=function(t){const n={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[t.getFieldValue("OP")],o="=="===n||"!="===n?e.ORDER_EQUALITY:e.ORDER_RELATIONAL;return[(e.valueToCode(t,"A",o)||"0")+" "+n+" "+(e.valueToCode(t,"B",o)||"0"),o]}})(c);const u="mainWorkspace",d=function(e){const t=o.serialization.workspaces.save(e);window.localStorage?.setItem(u,JSON.stringify(t))},p=function(e){const t=window.localStorage?.getItem(u);t&&(o.Events.disable(),o.serialization.workspaces.load(JSON.parse(t),e,!1),o.Events.enable())},h={kind:"categoryToolbox",contents:[{kind:"category",name:"函式庫 Library",contents:[{kind:"block",type:"stdio"},{kind:"block",type:"mathlib"}]},{kind:"category",name:"函数 function",contents:[{kind:"block",type:"main"},{kind:"block",type:"return"}]},{kind:"category",name:"自定義",contents:[{kind:"block",type:"math_constant"},{kind:"block",type:"variable_name_input"},{kind:"block",type:"literal_value"},{kind:"block",type:"literal_input"}]},{kind:"category",name:"輸入/輸出 I/O",contents:[{kind:"block",type:"printf"},{kind:"block",type:"scanf"},{kind:"block",type:"variable_name_input"}]},{kind:"category",name:"變數 Variables",contents:[{kind:"block",type:"declare_variable"},{kind:"block",type:"assignment"},{kind:"block",type:"datatype"}]},{kind:"category",name:"控制",contents:[{kind:"block",type:"if_else"},{kind:"block",type:"condition_comparison"}]}]};var f=n(72),m=n.n(f),g=n(825),_=n.n(g),b=n(659),y=n.n(b),k=n(56),I=n.n(k),T=n(540),E=n.n(T),C=n(113),v=n.n(C),x=n(523),A={};async function R(){try{const[e,t]=await Promise.all([Promise.resolve().then(n.bind(n,671)),n.e(211).then(n.bind(n,251))]),o=e.default||e;return o.setLocale(t),{Blockly:o,cGenerator:c,save:d,load:p,toolbox:h}}catch(e){throw console.error("Error loading Blockly modules:",e),e}}A.styleTagTransform=v(),A.setAttributes=I(),A.insert=y().bind(null,"head"),A.domAPI=_(),A.insertStyleElement=E(),m()(x.A,A),x.A&&x.A.locals&&x.A.locals;const O=document.getElementById("blocklyDiv"),S=document.getElementById("runButton"),N=document.getElementById("interactiveConsoleOutput"),D=document.getElementById("interactiveConsoleInput");let B,w,L=null,M=null;function F(e,t="info"){if(!N)return;const n=document.createElement("div");switch(n.textContent=e,t){case"error":n.style.color="red";break;case"info":n.style.color="blue";break;case"input":n.style.color="green";break;default:n.style.color="black"}N.appendChild(n),N.scrollTop=N.scrollHeight}function V(){(!B||B.readyState!==WebSocket.CONNECTING&&B.readyState!==WebSocket.OPEN)&&(L&&clearTimeout(L),L=setTimeout((()=>{F("Connecting to server...","info"),B=new WebSocket("wss://907b045e-924d-41f8-b740-6b3113d0a80c-00-23aeeii8vedx0.riker.replit.dev/"),B.onopen=function(e){F("Connected to server successfully!","info"),S&&(S.disabled=!1),D&&(D.disabled=!1)},B.onmessage=function(e){try{const t=JSON.parse(e.data);"EXECUTION_RESULT"===t.type?(t.output&&F(t.output,"info"),t.error&&F(`Error: ${t.error}`,"error"),S&&(S.disabled=!1)):"PROGRAM_OUTPUT"===t.type?F(t.output,"info"):"PROGRAM_ERROR"===t.type?F(t.error,"error"):"EXECUTION_COMPLETE"===t.type?(F("Program execution completed.","info"),S&&(S.disabled=!1),D&&(D.disabled=!0)):"INPUT_REQUEST"===t.type&&(F("Program is waiting for input...","info"),D&&(D.disabled=!1,D.focus()))}catch(e){console.error("Error parsing WebSocket message:",e),F("Received invalid message from server.","error")}},B.onerror=function(e){console.error("WebSocket error:",e),F("Connection error occurred.","error"),S&&(S.disabled=!0),D&&(D.disabled=!0)},B.onclose=function(e){e.wasClean?F("Connection closed cleanly.","info"):(F("Connection lost. Attempting to reconnect...","error"),setTimeout(V,3e3)),S&&(S.disabled=!0),D&&(D.disabled=!0)}}),100))}!async function(){if(!M){O.innerHTML='\n    <div class="loading-container">\n      <div class="loading-spinner"></div>\n      <div>載入 Blockly 編程環境中...</div>\n      <div style="font-size: 14px; margin-top: 10px; color: #999;">首次載入可能需要幾秒鐘</div>\n    </div>\n  ';try{console.log("Starting to load Blockly modules..."),M=await R();const{Blockly:e,cGenerator:t,save:n,load:o,toolbox:i}=M;console.log("Blockly modules loaded successfully"),console.log("Blockly.Msg.DUPLICATE_BLOCK:",e.Msg.DUPLICATE_BLOCK);const r={toolbox:i,theme:e.Theme.defineTheme("largeTextTheme",{base:e.Themes.Classic,fontStyle:{size:10},componentStyles:{workspaceBackgroundColour:"#81CFF4",toolboxBackgroundColour:"#4287f5"}}),renderer:"zelos",collapse:!0,comments:!0,disable:!0,maxBlocks:1/0,trashcan:!0,horizontalLayout:!1,toolboxPosition:"start",css:!0,media:"https://unpkg.com/blockly/media/",rtl:!1,scrollbars:!0,sounds:!1,oneBasedIndex:!0,grid:{spacing:20,length:3,colour:"#ccc",snap:!0},zoom:{controls:!0,wheel:!1,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2}};console.log("Injecting Blockly workspace..."),O.innerHTML="",w=e.inject(O,r),console.log("Blockly workspace injected successfully"),window.innerWidth<845&&(w.setScale(.75),w.getToolbox().getFlyout().setVisible(!1)),function(e,t){const n=()=>{let e=t.workspaceToCode(w);e=e.split("\n").filter((e=>!e.trim().includes("/* HIDE_FROM_STUDENT */"))).join("\n");const n=document.getElementById("generatedCode")?.firstChild;n&&(n.textContent=e)};w.addChangeListener((t=>{t.isUiEvent||t.type==e.Events.FINISHED_LOADING||w.isDragging()||n()})),w.addChangeListener((t=>{if(t.type===e.Events.BLOCK_CREATE){const e=w.getBlockById(t.blockId);e&&"main"===e.type&&e.comment&&e.comment.setEditable(!1)}})),document.getElementById("runButton").addEventListener("click",(async function(){const e=t.workspaceToCode(w);if(N&&(N.innerHTML=""),!B||B.readyState===WebSocket.CLOSED)return F("Not connected. Attempting to establish connection...","info"),V(),void F("Connection attempt started. Once connected, click Run Code again.","info");var n;B.readyState!==WebSocket.CONNECTING?(n=e,F("Sending code to server for execution...","info"),B.send(JSON.stringify({type:"EXECUTE_CODE",code:n})),S&&(S.disabled=!0)):F("Still connecting... Please wait. If ready, Run Code button will be enabled.","info")})),D&&D.addEventListener("keypress",(function(e){if("Enter"===e.key){const t=this.value;B&&B.readyState===WebSocket.OPEN?(F(`> ${t}`,"input"),B.send(JSON.stringify({type:"PROGRAM_INPUT",input:t})),this.value=""):F("Cannot send input: Not connected to server.","error"),e.preventDefault()}})),w.getAllBlocks(!1).length>0&&n()}(e,t),V(),console.log("Workspace initialization completed")}catch(e){console.error("Failed to load Blockly:",e),console.error("Error details:",e.message),console.error("Error stack:",e.stack),O.innerHTML=`\n      <div style="color: red; padding: 20px; text-align: center;">\n        <h3>載入失敗</h3>\n        <p>錯誤詳情: ${e.message}</p>\n        <button onclick="window.location.reload()" style="background: #79c7c5; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">\n          重新整理頁面\n        </button>\n      </div>\n    `}}}()},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={id:e,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,i,r)=>{if(!n){var s=1/0;for(u=0;u<e.length;u++){for(var[n,i,r]=e[u],a=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(a=!1,r<s&&(s=r));if(a){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,i,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.e=()=>Promise.resolve(),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[s,a,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(l)var u=l(o)}for(t&&t(n);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=self.webpackChunkc_ode=self.webpackChunkc_ode||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0;var i=o.O(void 0,[211],(()=>o(822)));i=o.O(i)})();